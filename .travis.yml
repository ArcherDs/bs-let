language: node_js
os:
  - linux
  - osx
cache:
  yarn: true
  directories:
    - "$HOME/.esy"
node_js:
  - "11"
install:
  - npm install -g esy
script:
  - npm run build
  - mv _esy/default/build/default/.ppx/let_anything_ppx/ppx.exe ppx-$TRAVIS_OS_NAME.exe
deploy:
  provider: npm
  email: m@mrmurphy.dev
  api_key:
    secure: K8Aey64EnxWRb/Q4N5+9ate+it2/mm5YjR8N+1hxTD+UH6clHeg+6VvDtN3jPgGL4aI0N4k1Iqdc7xsuwrzktA97z5RcAaubBm4nttEry7XyoNdhJVJhr68j9+Ft2A4r7MI2wUNUF8FTUzTk5lCBC/JfLeefcNFXLEuS6Q+NV1Nf50qNRSLEPfYHPWw0m4jioLN4+SpoqHRmwTplMgEx9rVmc27rDsNCyi1QXrGEeRdyX0vV53iEDsckWqrGhfQnZ3eRWFb3q9sNdKh1g/SefAcLwHYTA5Ndal/EMx4KTISZUJJksD+bUMs7dnTbGBUcezoMeNBCPmITppCVg5kOFSkidOCDhI+noQFcSsq8X+WVkiZjUVWquA/GXlnxKFci3U0Va/dNI/lZzdIF6ei8irjOUQrBJxHsfLCUVcQGD1MSu2qeN2ilkaDWkBVLwPV2RysibCYqZE87JmbgXEGi7/Iga+zUxhZEZccjUrBxdC5piEbcdYJsHeY2Jy5c/QRehzj+XHhbDG9byfmbBu30XoC3FRvl9H6vn1HZHuiRMAD4PQDHNLkMLt5GDF/WfK76fAhcHfU9+AC0VE/SApUHSf/EQKzN2ZHPbQ/JzGWO5EQejiJGqIU4RB77IMfhPgxpI5t/zBGGg7o5KV1FKOr8wzYkCAVPNcISuLGZZlF9r68=
  on:
    repo: mrmurphy/let-anything
